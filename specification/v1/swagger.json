{"swagger":"2.0","info":{"version":"1.0","title":"Haipa API","description":"Haipa management API","termsOfService":"","contact":{"name":"dbosoft","email":"support@dbosoft.eu"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"basePath":"/api","paths":{"/odata/v1/Machines":{"get":{"tags":["Machines"],"operationId":"Machines_List","consumes":[],"produces":["application/json"],"parameters":[{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"},{"name":"$filter","in":"query","description":"Restricts the set of items returned. The maximum number of expressions is 100. The allowed functions are: allfunctions.","required":false,"type":"string"},{"name":"$orderby","in":"query","description":"Specifies the order in which items are returned. The maximum number of expressions is 5.","required":false,"type":"string"},{"name":"$top","in":"query","description":"Limits the number of items returned from a collection.","required":false,"type":"integer","format":"int32"},{"name":"$skip","in":"query","description":"Excludes the specified number of items of the queried collection from the result.","required":false,"type":"integer","format":"int32"},{"name":"$count","in":"query","description":"Indicates whether the total count of items within a collection are returned in the result.","required":false,"type":"boolean","default":false}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/ODataValue[IEnumerable[Machine]]"}},"404":{"description":"Not Found"}}},"post":{"tags":["Machines"],"operationId":"Machines_UpdateOrCreate","consumes":[],"produces":[],"parameters":[{"name":"config","in":"body","required":false,"schema":{"$ref":"#/definitions/MachineConfig"}}],"responses":{"200":{"description":"Success"}}}},"/odata/v1/Machines({key})":{"get":{"tags":["Machines"],"operationId":"Machines_Get","consumes":[],"produces":["application/json"],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"},{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success","schema":{"$ref":"#/definitions/Machine"}},"404":{"description":"Not Found"}}},"delete":{"tags":["Machines"],"operationId":"Machines_Delete","consumes":[],"produces":[],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"}],"responses":{"200":{"description":"Success"}}}},"/odata/v1/Machines({key})/Start":{"post":{"tags":["Machines"],"operationId":"Machines_Start","consumes":[],"produces":[],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"},{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/odata/v1/Machines({key})/Stop":{"post":{"tags":["Machines"],"operationId":"Machines_Stop","consumes":[],"produces":[],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"},{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/odata/v1/Networks":{"get":{"tags":["Networks"],"operationId":"Networks_List","consumes":[],"produces":[],"parameters":[{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success"}}},"post":{"tags":["Networks"],"operationId":"Networks_Create","consumes":[],"produces":[],"parameters":[{"name":"network","in":"body","required":false,"schema":{"$ref":"#/definitions/Network"}}],"responses":{"200":{"description":"Success"}}}},"/odata/v1/Networks({key})":{"get":{"tags":["Networks"],"operationId":"Networks_Get","consumes":[],"produces":[],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"},{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success"}}},"put":{"tags":["Networks"],"operationId":"Networks_Update","consumes":[],"produces":[],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"},{"name":"update","in":"body","required":false,"schema":{"$ref":"#/definitions/Network"}}],"responses":{"200":{"description":"Success"}}},"patch":{"tags":["Networks"],"operationId":"Networks_Patch","consumes":[],"produces":[],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"},{"name":"product","in":"body","required":false,"schema":{"$ref":"#/definitions/Network"}}],"responses":{"200":{"description":"Success"}}}},"/odata/v1/Operations":{"get":{"tags":["Operations"],"operationId":"Operations_List","consumes":[],"produces":[],"parameters":[{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/odata/v1/Operations({key})":{"get":{"tags":["Operations"],"operationId":"Operations_Get","consumes":[],"produces":[],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"},{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/odata/v1/Operations({key})/logEntries":{"get":{"tags":["Operations"],"operationId":"Operations_GetLogEntries","consumes":[],"produces":[],"parameters":[{"name":"key","in":"path","required":true,"type":"string","format":"uuid"},{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success"}}}},"/odata/v1":{"get":{"tags":["Subnets"],"operationId":"Subnets_List","consumes":[],"produces":[],"parameters":[{"name":"$select","in":"query","description":"Limits the properties returned in the result.","required":false,"type":"string"},{"name":"$expand","in":"query","description":"Indicates the related entities to be represented inline. The maximum depth is 2.","required":false,"type":"string"}],"responses":{"200":{"description":"Success"}}}}},"definitions":{"ODataValue[IEnumerable[Machine]]":{"type":"object","properties":{"value":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/Machine"}}}},"Machine":{"type":"object","properties":{"id":{"format":"uuid","type":"string"},"name":{"type":"string"},"agent":{"$ref":"#/definitions/Agent"},"agentName":{"type":"string"},"status":{"enum":["Stopped","Running","Pending","Error"],"type":"string"},"vm":{"$ref":"#/definitions/VirtualMachine"},"networks":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/MachineNetwork"}}}},"Agent":{"type":"object","properties":{"name":{"type":"string"},"networks":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/AgentNetwork"}},"machines":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/Machine"}}}},"VirtualMachine":{"type":"object","properties":{"id":{"format":"uuid","type":"string"},"path":{"type":"string"},"networkAdapters":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/VirtualMachineNetworkAdapter"}},"machine":{"$ref":"#/definitions/Machine"}}},"MachineNetwork":{"type":"object","properties":{"machineId":{"format":"uuid","type":"string"},"adapterName":{"type":"string"},"ipV4Addresses":{"uniqueItems":false,"type":"array","items":{"type":"string"}},"ipV6Addresses":{"uniqueItems":false,"type":"array","items":{"type":"string"}},"iPv4DefaultGateway":{"type":"string"},"iPv6DefaultGateway":{"type":"string"},"dnsServerAddresses":{"uniqueItems":false,"type":"array","items":{"type":"string"}},"ipV4Subnets":{"uniqueItems":false,"type":"array","items":{"type":"string"}},"ipV6Subnets":{"uniqueItems":false,"type":"array","items":{"type":"string"}},"machine":{"$ref":"#/definitions/Machine"}}},"AgentNetwork":{"type":"object","properties":{"network":{"$ref":"#/definitions/Network"},"agentName":{"type":"string"},"networkId":{"format":"uuid","type":"string"},"virtualSwitchName":{"type":"string"},"agent":{"$ref":"#/definitions/Agent"}}},"VirtualMachineNetworkAdapter":{"type":"object","properties":{"machineId":{"format":"uuid","type":"string"},"name":{"type":"string"},"switchName":{"type":"string"},"macAddress":{"type":"string"},"vm":{"$ref":"#/definitions/VirtualMachine"}}},"Network":{"required":["name"],"type":"object","properties":{"id":{"format":"uuid","type":"string"},"name":{"type":"string"},"vLanId":{"format":"int64","type":"integer"},"subnets":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/Subnet"}},"agentNetworks":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/AgentNetwork"}}}},"Subnet":{"type":"object","properties":{"id":{"format":"uuid","type":"string"},"networkId":{"format":"uuid","type":"string"},"isPublic":{"type":"boolean"},"dhcpEnabled":{"type":"boolean"},"ipVersion":{"format":"int32","type":"integer"},"gatewayAddress":{"type":"string"},"address":{"type":"string"},"dnsServerAddresses":{"uniqueItems":false,"type":"array","items":{"type":"string"}},"network":{"$ref":"#/definitions/Network"}}},"MachineConfig":{"type":"object","properties":{"name":{"type":"string"},"vm":{"$ref":"#/definitions/VirtualMachineConfig"},"networks":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/MachineNetworkConfig"}},"provisioning":{"$ref":"#/definitions/VirtualMachineProvisioningConfig"}}},"VirtualMachineConfig":{"type":"object","properties":{"path":{"type":"string"},"cpu":{"$ref":"#/definitions/VirtualMachineCpuConfig"},"memory":{"$ref":"#/definitions/VirtualMachineMemoryConfig"},"disks":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/VirtualMachineDiskConfig"}},"networkAdapters":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/VirtualMachineNetworkAdapterConfig"}}}},"MachineNetworkConfig":{"type":"object","properties":{"adapterName":{"type":"string"},"subnets":{"uniqueItems":false,"type":"array","items":{"$ref":"#/definitions/MachineSubnetConfig"}}}},"VirtualMachineProvisioningConfig":{"type":"object","properties":{"hostname":{"type":"string"},"userData":{"type":"object"}}},"VirtualMachineCpuConfig":{"type":"object","properties":{"count":{"format":"int32","type":"integer"}}},"VirtualMachineMemoryConfig":{"type":"object","properties":{"startup":{"format":"int32","type":"integer"},"minimum":{"format":"int32","type":"integer"},"maximum":{"format":"int32","type":"integer"}}},"VirtualMachineDiskConfig":{"type":"object","properties":{"name":{"type":"string"},"path":{"type":"string"},"template":{"type":"string"},"size":{"format":"int32","type":"integer"}}},"VirtualMachineNetworkAdapterConfig":{"type":"object","properties":{"name":{"type":"string"},"switchName":{"type":"string"},"macAddress":{"type":"string"}}},"MachineSubnetConfig":{"type":"object","properties":{"type":{"type":"string"}}}},"tags":[]}